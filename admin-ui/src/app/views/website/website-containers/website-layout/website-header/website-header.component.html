<c-navbar colorScheme="dark" expand="lg" [ngClass]="{'transparent-navbar': !isScrolled, 'dark-navbar': isScrolled}"
    class="bg-dark py-0 " style="height:64px; 
    ">
    <c-container fluid>
        <a style="width: 50px;" cNavbarBrand href="/" target="_blank" class="d-none d-lg-block">
            <img src="./assets/img/brand/coreui-signet.svg" alt="" />
        </a>
        <button [cNavbarToggler]="collapseRef" style="margin-top: 17px !;"></button>
        <div #collapseRef="cCollapse" navbar cCollapse>
            <c-navbar-nav>
                <c-nav-item>
                    <a cNavLink routerLink="/">Trang Chủ</a>
                </c-nav-item>
                <c-nav-item>
                    <a cNavLink>Loạt Bài</a>
                </c-nav-item>
                <c-dropdown variant="nav-item" [popper]="false">
                    <a cDropdownToggle cNavLink>Danh Mục</a>
                    <ul cDropdownMenu>
                        <li *ngFor="let item of postCategories">
                            <button cDropdownItem (click)="navigateToDetail('posts',item.slug)">{{item.label}}</button>
                        </li>
                    </ul>
                </c-dropdown>
                <c-nav-item>
                    <a cNavLink class="d-block d-lg-none d-xl-block">Liên Hệ</a>
                </c-nav-item>
                <c-dropdown variant="nav-item" [popper]="false">
                    <a cDropdownToggle cNavLink>Dự Án</a>
                    <ul cDropdownMenu>
                        <li *ngFor="let item of projectCategories">
                            <button cDropdownItem
                                (click)="navigateToDetail('projects',item.slug)">{{item.label}}</button>
                        </li>
                    </ul>
                </c-dropdown>
                <form cForm class="d-flex mx-auto d-lg-none" style="margin-left: 0 !important;" role="search">
                    <input cFormControl type="search" placeholder="Search" aria-label="Search" class="me-2">
                    <button id="_buttonSearch">
                        Search
                    </button>
                    <!-- <button id="_buttonSearch" cButton color="warning" variant="outline">Search</button> -->
                </form>
            </c-navbar-nav>
        </div>
        <form cForm class="d-flex mx-auto d-none d-lg-flex " style="margin-right: 10px !important;" role="search">
            <input cFormControl type="search" placeholder="Search" aria-label="Search" class="me-2">
            <button id="_buttonSearch" cButton variant="outline">Search</button>
        </form>
        <c-header-nav class="userIo">
            <ng-container *ngIf="isLoggedIn == true;else loginTemplate ">
                <ng-container *ngTemplateOutlet="userDropdown"></ng-container>
            </ng-container>
            <ng-template #loginTemplate class="ms-2">
                <button id="_buttonLogin" cButton class="d-flex my-auto  " style="margin-right: 12px;" color="danger"
                    variant="outline" routerLink="/user/login">Đăng
                    Nhập</button>
            </ng-template>
        </c-header-nav>

    </c-container>
</c-navbar>

<ng-template #userDropdown>
    <c-dropdown alignment="end" variant="nav-item">
        <button cButton color="" [caret]="false" cDropdownToggle class="py-0">
            <c-avatar cTextColor="primary" shape="circle" size="md" [src]="environment.API_URL + user.avatar"
                status="success" style="border-radius: 50%; width: 50px; height: 50px;"></c-avatar>
        </button>
        <ul cDropdownMenu class="pt-0 pr-5 w-auto">
            <li>
                <h6 cDropdownHeader class="bg-light fw-semibold py-2">Account</h6>
            </li>
            <li class="d-lg-none">
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name="cilBell"></svg>
                    <span style="font-size: 16px;">Thông Báo</span>
                    <c-badge *ngIf="announcements && announcements.length>0" class="ms-2 float-end" color="success">
                        {{announcements.length}}
                    </c-badge>
                </a>
            </li>
            <li>
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name="cilTask"></svg>
                    Tasks
                    <c-badge class="ms-2 float-end" color="danger">
                        42
                    </c-badge>
                </a>
            </li>
            <li>
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name='cilCommentSquare'></svg>
                    Comments
                    <c-badge class="ms-auto" color="warning">
                        42
                    </c-badge>
                </a>
            </li>
            <li>
                <h6 cDropdownHeader class="bg-light fw-semibold py-2">Settings</h6>
            </li>
            <li></li>
            <li>
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name="cilUser"></svg>
                    Profile
                </a>
            </li>
            <li>
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name="cilSettings"></svg>
                    Settings
                </a>
            </li>
            <li>
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name="cilCreditCard"></svg>
                    Payments
                    <c-badge class="ms-2 float-end" color="secondary">
                        42
                    </c-badge>
                </a>
            </li>
            <li>
                <a routerLink="./" cDropdownItem>
                    <svg cIcon class="me-2" name="cilFile"></svg>
                    Projects
                    <c-badge class="ms-2 float-end" color="primary">
                        42
                    </c-badge>
                </a>
            </li>
            <li>
                <hr cDropdownDivider />
            </li>
            <li>
                <a (click)="goToAdmin()" cDropdownItem style="cursor: pointer;">
                    <svg cIcon class="me-2" name="cilAccountLogout"></svg>
                    Quản Trị Admin
                </a>
            </li>
            <li>
                <a routerLink="./" (click)="logout()" cDropdownItem>
                    <svg cIcon class="me-2" name="cilLockLocked"></svg>
                    Đăng Xuất
                </a>
            </li>
            <li></li>
        </ul>
    </c-dropdown>
</ng-template>